<style>

input:not(#bagged-check),select {
    padding: 6px 10px;
    margin: 3px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
}

select {
	padding: 12px 10px;
}

.calc-input {
    width: 120px;
    padding: 6px 10px;
    margin: 3px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    float: left;
}

body, input, textarea, button, select {
    font-family: Arimo,sans-serif;
    font-style: normal;
    font-weight: 400;
    color: #3d4246;
    line-height: 1.5;
}

#content {
    padding: 30px;
    margin-top: 30px;
    background-color: rgba(0,132,3,0.1);
	width:400px;
	margin:auto;
}

#header {
	text-align:center;
	width:400px;
	margin:auto;
	font-weight:bold;
}

.form {
	width:400px;
}

.input-label {
	width:200px;
	float:left;
}

</style>
<div id="header">
<img src="logo200.png"><br>Pricing Tool
</div>
<div id="content">
<div id="form">
<div class="input-label">Product: </div>
<select id="product-select" class="form" onchange="productChange()">
</select>
<br>
<div class="input-label">Distance: </div><input id="mileage-input" class="form" type="number" value=1></input>
<br>
<div class="input-label"><span id="amount-label">Amount</span>: </div><input id="amount-input" class="form" type="number" value=1></input>
<br>
<input id="bagged-check" type="checkbox" value="bagged">Bagged
<br>
<div class="input-label">Vehicle:</div>
<select id="vehicle-select" class="form">
  <option value="auto">Auto-select</option>
</select>
<br>
<button type="button" onclick="buttonPress()">Calculate</button>
<div id="output"></div>
<br>

</div>
</div>

<script>

//Vehicle class - used to store information about each vehicle
class Vehicle {
	constructor(name,max_loose,max_heavy,max_light){
		this.name = name
		this.max_loose = max_loose
		this.max_heavy = max_heavy
		this.max_light = max_light
	}
}

//Product class - used to store information about one type of product
class Product {
	constructor(name,price_loose,price_bagged,heavy){
		this.name = name
		this.price_loose = price_loose
		this.price_bagged = price_bagged
		this.heavy = heavy
	}
}

//VehicleList class - container for all Vehicle objects being used
class VehicleList {
	constructor(){
		this.vehicles = []
	}
	
	getVehicle(name){
		for (var v in this.vehicles){
			if(name.toLowerCase() == this.vehicles[v].name.toLoserCase()){
				return this.vehicles[v]
			}
		}
		console.log("vehicle: " + name + " not found.")
	}
	
	addVehicles(list_of_vehicles){
		for (var v in list_of_vehicles){
			this.vehicles.push(list_of_vehicles[v])
		}
	}
}

//ProductList class - container for all Product objects being used
class ProductList{
	constructor (){
		this.products = []
	}
	
	getProduct(name){
		for (var p in this.products){
			console.log(this.products[p].name)
			if(name.toLowerCase() == this.products[p].name.toLowerCase()){
				return this.products[p]
			}
		}
		console.log("product: " + name + " not found.")
	}
	
	addProducts (list_of_products){
		for (var p in list_of_products){
			this.products.push(list_of_products[p])
		}
	}
}

//Quote class - class to store information
class Quote{
	constructor(product,amount,vehicle,bagged,distance){
		this.product = products.getProduct(product)
		this.amount = parseFloat(amount)
		this.vehicle = vehicle
		this.bagged = bagged
		this.distance = parseFloat(distance)
	}
}

function el(id){
	return document.getElementById(id)
}

function setup(){
	for (var v in vehicles.vehicles){
		name = vehicles.vehicles[v].name
		el("vehicle-select").innerHTML += "<option value='" + name + "'>" + name + "</option>"
	}
	for (var p in products.products){
		name = products.products[p].name
		el("product-select").innerHTML += "<option value='" + name + "'>" + name + "</option>"
	}
}

function buttonPress(){
	q_product = el("product-select").value
	q_amount = el("amount-input").value
	q_vehicle = el("vehicle-select").value
	q_bagged = el("bagged-check").checked
	q_distance = el("mileage-input").value
	new_quote = new Quote(q_product,q_amount,q_vehicle,q_bagged,q_distance)
	console.log(new_quote)
}

function calculatePrice(product,amount,vehicle,bagged,mileage){
	if(bagged){
		price = getProduct(product).price_bagged
	} else {
		price = products[product].price_loose
	}
	price *= amount
	amount_working = amount
	vehicles_to_use = []
	while(amount_working > 0){
		if(vehicle == "auto"){
			best_veh = null
			best_amount = -1
			for (var v in vehicles){
				//amount_working - v.
			}
		} else {
			for (var i = 0;i < Math.ceil(amount/vehicles[vehicle]);i++){
				vehicles_to_use.push(vehicle)
			}
			amount_working = 0
		}
	}
	number_of_trips = vehicles_to_use.length
	delivery_cost = mileage * 2 * number_of_trips * 0.67
	with_discount = price
	if (amount < 5){
		
	} else if (amount < 20) {
		with_discount = price*0.9
	} else {
		with_discount = price*0.8
	}
	return [price,number_of_trips,vehicles_to_use,delivery_cost,with_discount];
}

function productChange(){
	amount_label = el("amount-label")
	product_select = el("product-select")
	if(product_select.value == "topsoil"){
		amount_label.innerHTML = "Weight (tonnes)"
	} else if (product_select.value == "bark") {
		amount_label.innerHTML = "Volume (mÂ³)"
	}
}

vehicles = new VehicleList()
products = new ProductList()

vehicles.addVehicles([
	new Vehicle("19.5 tonne lorry",19.5,0,0),
	new Vehicle("16.5 tonne lorry",16.5,12,12),
	new Vehicle("6 bag lorry",0,4,6),
	new Vehicle("Iveco",4,0,0),
	new Vehicle("Cabstar",2,0,0)
])

products.addProducts([
	new Product("Topsoil",70,72,true),
	new Product("Bark",79,81,false)
])

productChange()

setup()



</script>